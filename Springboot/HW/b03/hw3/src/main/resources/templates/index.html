<!DOCTYPE html>
<html lang="en">

<head th:fragment="head">
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <title>All Car</title>
</head>

<body style="margin:20px">
  <header th:fragment="navigator" class="row">
    <a th:href="@{/home}" class="col-md-3">Home</a>
    <a th:href="@{/add}" class="col-md-3">Add</a>
    <a th:href=@{/visible} class="col-md-3"> Edit</a>
    <a th:href=@{/search} class="col-md-3">Search</a>
  </header>
  <div th:if="${showSearchBar == true}">
    <form action="#" th:action="@{/search}" th:object="${searchRequest}" method="post">
      <input type="text" class="form-control" placeholder="Type something" th:field="*{keyword}" /> <br /><br />
    </form>
  </div>



  <table th:class="table">
    <div th:if="${menu == true}" class="form-group" style="width: 60%; margin:20px 0 20px">
      <form action="#" th:action="@{/add}" th:object="${addingRequest}" method="post">
        <div>
          <input type="text" class="form-control" placeholder="Id" th:field="*{id}" /><br /><br />
          <input type="text" class="form-control" placeholder="Model" th:field="*{model}" /><br /><br />
          <input type="text" class="form-control" placeholder="Manufactor" th:field="*{manufactor}" /><br /><br />
          <input type="text" class="form-control" placeholder="Price" th:field="*{price}" /><br /><br />
          <input type="text" class="form-control" placeholder="Sales" th:field="*{sales}" /><br /><br />
          <input type="text" class="form-control" placeholder="Photo Link" th:field="*{photo}" /><br /><br />
        </div>
        <button type="submit" class="btn">Add new Car</button>
      </form>



    </div>

    <tr>

      <th>Id</th>
      <th>Photo</th>
      <th>Model</th>
      <th>Manufactor</th>
      <th>Price</th>
      <th>Sales</th>
    </tr>
    <tr th:each="car : ${cars}">
      <td th:text="${car.id}"></td>
      <td> <img width="400" th:src="${car.photo == null || car.photo == ''} ? @{images/images.jpg} :
          @{${car.photo}} " />


        <div th:if="${clicked == true}" class="row">

          <a th:href="@{/edit}" class="col-md-5">Edit</a> <a th:href="@{/delete}" class="col-md-5">Delete</a>
        </div>
        <div th:if="${showEditor == true}" class="form-group" style="width: 60%; margin:20px 0 20px">
          <form action="#" th:action="@{/edit}" th:object="${editRequest}" method="post">

            <input type="hidden" class="form-control" placeholder="Id" th:name="id" th:value="${car.id}" /><br /><br />
            <input type="text" class="form-control" placeholder="Model" th:field="*{model}" /><br /><br />
            <input type="text" class="form-control" placeholder="Manufactor" th:field="*{manufactor}" /><br /><br />
            <input type="text" class="form-control" placeholder="Price" th:field="*{price}" /><br /><br />
            <input type="text" class="form-control" placeholder="Sales" th:field="*{sales}" /><br /><br />
            <input type="text" class="form-control" placeholder="Photo Link" th:field="*{photo}" /><br /><br />
            <button type="submit" class="btn">Update Car</button>
          </form>
        </div>


        <div th:if="${showDeleteConfirm == true}" class="form-group" style="width: 60%; margin:20px 0 20px">
          <h3>Are you sure</h3>
          <form action="#" th:action="@{/delete}" th:object="${deleteRequest}" method="post">
            <input type="hidden" th:name="id" th:value="${car.id}">
            <button type="submit" class="btn">Yes</button>
          </form>
          <form action="#" th:action="@{/visible}" method="get">

            <button type="submit" class="btn">No</button>
          </form>

        </div>



      </td>

      <td th:text="${car.model}"></td>
      <td th:text="${car.manufactor}"></td>
      <td th:text="${car.price}"></td>
      <td th:text="${car.sales}"></td>
    </tr>
  </table>
</body>

</html>